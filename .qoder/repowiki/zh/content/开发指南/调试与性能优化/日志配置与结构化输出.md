# æ—¥å¿—é…ç½®ä¸ç»“æ„åŒ–è¾“å‡º

<cite>
**æœ¬æ–‡æ¡£å¼•ç”¨çš„æ–‡ä»¶**  
- [logger.ts](file://backend/src/utils/logger.ts)
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart)
- [index.ts](file://backend/src/index.ts)
- [errorHandler.ts](file://backend/src/middleware/errorHandler.ts)
- [dio_client.dart](file://flutter_app/lib/core/network/dio_client.dart)
- [database_helper.dart](file://flutter_app/lib/core/storage/database_helper.dart)
- [secure_storage_helper.dart](file://flutter_app/lib/core/storage/secure_storage_helper.dart)
- [main.dart](file://flutter_app/lib/main.dart)
</cite>

## ç›®å½•
1. [ç®€ä»‹](#ç®€ä»‹)
2. [åç«¯æ—¥å¿—ç³»ç»Ÿé…ç½®](#åç«¯æ—¥å¿—ç³»ç»Ÿé…ç½®)
3. [ç§»åŠ¨ç«¯æ—¥å¿—ç³»ç»Ÿé…ç½®](#ç§»åŠ¨ç«¯æ—¥å¿—ç³»ç»Ÿé…ç½®)
4. [æ—¥å¿—çº§åˆ«ä¸åˆ†çº§æœºåˆ¶](#æ—¥å¿—çº§åˆ«ä¸åˆ†çº§æœºåˆ¶)
5. [ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸å…¨é“¾è·¯è¿½è¸ª](#ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸å…¨é“¾è·¯è¿½è¸ª)
6. [æ—¥å¿—è¾“å‡ºæ ¼å¼ä¸ç¯å¢ƒé…ç½®](#æ—¥å¿—è¾“å‡ºæ ¼å¼ä¸ç¯å¢ƒé…ç½®)
7. [å®é™…ä½¿ç”¨ç¤ºä¾‹](#å®é™…ä½¿ç”¨ç¤ºä¾‹)
8. [æ—¥å¿—é›†æˆä¸ç›‘æ§å¹³å°](#æ—¥å¿—é›†æˆä¸ç›‘æ§å¹³å°)
9. [å¸¸è§é”™è¯¯ä¸æœ€ä½³å®è·µ](#å¸¸è§é”™è¯¯ä¸æœ€ä½³å®è·µ)

## ç®€ä»‹
æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜äº†åœ¨åç«¯ï¼ˆTypeScriptï¼‰å’Œç§»åŠ¨ç«¯ï¼ˆFlutter/Dartï¼‰ä¸­å¦‚ä½•é…ç½®ç»“æ„åŒ–æ—¥å¿—ç³»ç»Ÿã€‚æ–‡æ¡£åˆ†æäº†åŸºäºWinstonçš„åç«¯æ—¥å¿—å®ç°å’ŒåŸºäºloggeråŒ…çš„ç§»åŠ¨ç«¯æ—¥å¿—å°è£…ï¼Œå±•ç¤ºäº†æ—¥å¿—åˆ†çº§ã€ä¸Šä¸‹æ–‡ä¿¡æ¯æ·»åŠ ã€å…¨é“¾è·¯è¿½è¸ªç­‰å…³é”®åŠŸèƒ½çš„å®ç°æœºåˆ¶ã€‚åŒæ—¶æä¾›äº†åœ¨ä¸åŒç»„ä»¶ï¼ˆæ§åˆ¶å™¨ã€BLoCã€æ•°æ®æºï¼‰ä¸­æ­£ç¡®ä½¿ç”¨æ—¥å¿—çš„å®é™…ç¤ºä¾‹ï¼Œå¹¶æŒ‡å¯¼å¦‚ä½•å°†æ—¥å¿—é›†æˆåˆ°æ–‡ä»¶è¾“å‡ºã€æ§åˆ¶å°æˆ–ç¬¬ä¸‰æ–¹ç›‘æ§å¹³å°ã€‚

## åç«¯æ—¥å¿—ç³»ç»Ÿé…ç½®

åç«¯æ—¥å¿—ç³»ç»ŸåŸºäºWinstonåº“å®ç°ï¼Œæä¾›äº†ç»“æ„åŒ–çš„æ—¥å¿—è®°å½•åŠŸèƒ½ã€‚æ—¥å¿—é…ç½®ä½äº`backend/src/utils/logger.ts`æ–‡ä»¶ä¸­ï¼Œé€šè¿‡ç¯å¢ƒå˜é‡æ§åˆ¶æ—¥å¿—çº§åˆ«ï¼Œæ”¯æŒJSONæ ¼å¼è¾“å‡ºå’Œé”™è¯¯å †æ ˆè·Ÿè¸ªã€‚

```mermaid
classDiagram
class WinstonLogger {
+level : string
+format : Format
+transports : Transport[]
+debug(message : string) : void
+info(message : string) : void
+warn(message : string) : void
+error(message : string) : void
}
class ConsoleTransport {
+format : Format
}
WinstonLogger --> ConsoleTransport : "ä½¿ç”¨"
```

**å›¾è¡¨æ¥æº**  
- [logger.ts](file://backend/src/utils/logger.ts#L3-L18)

**æœ¬èŠ‚æ¥æº**  
- [logger.ts](file://backend/src/utils/logger.ts#L1-L37)

## ç§»åŠ¨ç«¯æ—¥å¿—ç³»ç»Ÿé…ç½®

ç§»åŠ¨ç«¯æ—¥å¿—ç³»ç»ŸåŸºäºloggeråŒ…è¿›è¡Œå°è£…ï¼Œæä¾›äº†ç»Ÿä¸€çš„æ—¥å¿—è®°å½•æ¥å£ã€‚`app_logger.dart`æ–‡ä»¶ä¸­çš„`AppLogger`ç±»æ˜¯æ—¥å¿—ç³»ç»Ÿçš„æ ¸å¿ƒï¼Œå®ç°äº†å•ä¾‹æ¨¡å¼ã€æ—¥å¿—çº§åˆ«æ§åˆ¶ã€è‡ªå®šä¹‰è¿‡æ»¤å™¨ã€æ‰“å°å™¨å’Œè¾“å‡ºå™¨ã€‚

```mermaid
classDiagram
class AppLogger {
-_logger : Logger
-_isInitialized : boolean
-_level : Level
+initialize(level : Level) : void
+get instance : Logger
+debug(message : dynamic) : void
+info(message : dynamic) : void
+warning(message : dynamic) : void
+error(message : dynamic) : void
+fatal(message : dynamic) : void
+network(method : string, url : string) : void
+blocEvent(blocName : string, eventName : string) : void
+blocState(blocName : string, stateName : string) : void
+repository(repositoryName : string, operation : string) : void
+performance(operation : string, duration : Duration) : void
+setLevel(level : Level) : void
}
class _AppLogFilter {
-level : Level
+shouldLog(event : LogEvent) : boolean
}
class _AppLogPrinter {
+log(event : LogEvent) : string[]
}
class _AppLogOutput {
+output(event : OutputEvent) : void
}
AppLogger --> _AppLogFilter : "ä½¿ç”¨"
AppLogger --> _AppLogPrinter : "ä½¿ç”¨"
AppLogger --> _AppLogOutput : "ä½¿ç”¨"
```

**å›¾è¡¨æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L6-L294)

**æœ¬èŠ‚æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L1-L294)

## æ—¥å¿—çº§åˆ«ä¸åˆ†çº§æœºåˆ¶

### åç«¯æ—¥å¿—çº§åˆ«
åç«¯ä½¿ç”¨Winstonçš„æ ‡å‡†æ—¥å¿—çº§åˆ«ï¼šdebugã€infoã€warnã€errorã€‚æ—¥å¿—çº§åˆ«ç”±ç¯å¢ƒå˜é‡`LOG_LEVEL`æ§åˆ¶ï¼Œé»˜è®¤ä¸º'info'ã€‚åœ¨`logger.ts`æ–‡ä»¶ä¸­ï¼Œé€šè¿‡`winston.createLogger`é…ç½®äº†æ—¥å¿—çº§åˆ«å’Œæ ¼å¼ã€‚

**æœ¬èŠ‚æ¥æº**  
- [logger.ts](file://backend/src/utils/logger.ts#L4-L5)

### ç§»åŠ¨ç«¯æ—¥å¿—çº§åˆ«
ç§»åŠ¨ç«¯å®šä¹‰äº†æ›´ç²¾ç»†çš„æ—¥å¿—çº§åˆ«ï¼štraceã€debugã€infoã€warningã€errorã€fatalã€‚æ—¥å¿—çº§åˆ«æ ¹æ®è¿è¡Œæ¨¡å¼è‡ªåŠ¨è®¾ç½®ï¼šè°ƒè¯•æ¨¡å¼ä¸‹ä¸ºLevel.debugï¼Œå‘å¸ƒæ¨¡å¼ä¸‹ä¸ºLevel.warningã€‚`AppLogger`ç±»æä¾›äº†é™æ€æ–¹æ³•æ¥è®°å½•ä¸åŒçº§åˆ«çš„æ—¥å¿—ã€‚

```mermaid
flowchart TD
Start([åº”ç”¨å¯åŠ¨]) --> Initialize["AppLogger.initialize()"]
Initialize --> CheckMode{"kDebugMode?"}
CheckMode --> |æ˜¯| SetDebug["_level = Level.debug"]
CheckMode --> |å¦| SetWarning["_level = Level.warning"]
SetDebug --> CreateLogger["åˆ›å»ºLoggerå®ä¾‹"]
SetWarning --> CreateLogger
CreateLogger --> End([æ—¥å¿—ç³»ç»Ÿå°±ç»ª])
```

**å›¾è¡¨æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L11-L32)

**æœ¬èŠ‚æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L11-L32)

## ä¸Šä¸‹æ–‡ä¿¡æ¯ä¸å…¨é“¾è·¯è¿½è¸ª

### åç«¯ä¸Šä¸‹æ–‡ä¿¡æ¯
åç«¯é€šè¿‡Winstonçš„`format.combine`å’Œ`format.json`å®ç°ç»“æ„åŒ–æ—¥å¿—è¾“å‡ºï¼Œè‡ªåŠ¨åŒ…å«æ—¶é—´æˆ³å’Œé”™è¯¯å †æ ˆã€‚åœ¨`errorHandler.ts`ä¸­ï¼Œé”™è¯¯å¤„ç†ä¸­é—´ä»¶è®°å½•äº†è¯¦ç»†çš„é”™è¯¯ä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬é”™è¯¯æ¶ˆæ¯ã€å †æ ˆè·Ÿè¸ªã€è¯·æ±‚è·¯å¾„å’Œæ–¹æ³•ã€‚

```mermaid
sequenceDiagram
participant Client as "å®¢æˆ·ç«¯"
participant Server as "æœåŠ¡å™¨"
participant Logger as "æ—¥å¿—ç³»ç»Ÿ"
Client->>Server : å‘é€è¯·æ±‚
Server->>Server : å¤„ç†è¯·æ±‚
alt å‘ç”Ÿé”™è¯¯
Server->>Logger : è®°å½•é”™è¯¯
Logger->>Logger : æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯<br/>- é”™è¯¯æ¶ˆæ¯<br/>- å †æ ˆè·Ÿè¸ª<br/>- è¯·æ±‚è·¯å¾„<br/>- è¯·æ±‚æ–¹æ³•
Logger->>Console : è¾“å‡ºç»“æ„åŒ–æ—¥å¿—
end
Server->>Client : è¿”å›å“åº”
```

**å›¾è¡¨æ¥æº**  
- [errorHandler.ts](file://backend/src/middleware/errorHandler.ts#L20-L26)
- [logger.ts](file://backend/src/utils/logger.ts#L6-L8)

**æœ¬èŠ‚æ¥æº**  
- [errorHandler.ts](file://backend/src/middleware/errorHandler.ts#L20-L26)

### ç§»åŠ¨ç«¯ä¸Šä¸‹æ–‡ä¿¡æ¯
ç§»åŠ¨ç«¯é€šè¿‡è‡ªå®šä¹‰çš„`_AppLogPrinter`ç±»å®ç°ä¸°å¯Œçš„ä¸Šä¸‹æ–‡ä¿¡æ¯è¾“å‡ºï¼ŒåŒ…æ‹¬æ—¥å¿—çº§åˆ«å›¾æ ‡ã€æ—¶é—´æˆ³ã€æ—¥å¿—æ¶ˆæ¯ã€é”™è¯¯ä¿¡æ¯å’Œå †æ ˆè·Ÿè¸ªã€‚åœ¨è°ƒè¯•æ¨¡å¼ä¸‹ä¸”ä¸ºerror/fatalçº§åˆ«æ—¶ï¼Œä¼šæ˜¾ç¤ºå †æ ˆè·Ÿè¸ªçš„å‰5è¡Œã€‚

```mermaid
flowchart TD
A["æ—¥å¿—äº‹ä»¶"] --> B["_AppLogPrinter.log()"]
B --> C["æ ¼å¼åŒ–ä¸»æ¶ˆæ¯<br/>- å›¾æ ‡<br/>- çº§åˆ«åç§°<br/>- æ—¶é—´æˆ³<br/>- æ¶ˆæ¯å†…å®¹"]
C --> D{"æœ‰é”™è¯¯?"}
D --> |æ˜¯| E["æ·»åŠ é”™è¯¯ä¿¡æ¯"]
D --> |å¦| F{"æ˜¯error/fatalä¸”è°ƒè¯•æ¨¡å¼?"}
F --> |æ˜¯| G["æ·»åŠ å †æ ˆè·Ÿè¸ªå‰5è¡Œ"]
F --> |å¦| H["å®Œæˆæ ¼å¼åŒ–"]
E --> H
G --> H
H --> I["è¿”å›æ ¼å¼åŒ–åçš„æ—¥å¿—è¡Œ"]
```

**å›¾è¡¨æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L220-L252)

**æœ¬èŠ‚æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L220-L252)

## æ—¥å¿—è¾“å‡ºæ ¼å¼ä¸ç¯å¢ƒé…ç½®

### åç«¯è¾“å‡ºæ ¼å¼
åç«¯æ—¥å¿—é…ç½®ä¸ºJSONæ ¼å¼è¾“å‡ºï¼Œä¾¿äºæ—¥å¿—æ”¶é›†å’Œåˆ†æã€‚åœ¨`logger.ts`ä¸­ï¼Œé€šè¿‡`winston.format.json()`å®ç°JSONæ ¼å¼åŒ–ï¼ŒåŒæ—¶ä¿ç•™æ§åˆ¶å°çš„å½©è‰²è¾“å‡ºç”¨äºå¼€å‘è°ƒè¯•ã€‚

**æœ¬èŠ‚æ¥æº**  
- [logger.ts](file://backend/src/utils/logger.ts#L8-L15)

### ç§»åŠ¨ç«¯è¾“å‡ºæ ¼å¼
ç§»åŠ¨ç«¯å®ç°äº†è‡ªå®šä¹‰çš„è¾“å‡ºæ ¼å¼ï¼ŒåŒ…å«emojiå›¾æ ‡ã€çº§åˆ«åç§°ã€æ—¶é—´æˆ³å’Œæ¶ˆæ¯å†…å®¹ã€‚åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œåœ¨å‘å¸ƒæ¨¡å¼ä¸‹å¯ä»¥æ‰©å±•ä¸ºå‘é€åˆ°è¿œç¨‹æœåŠ¡å™¨ã€‚

```mermaid
classDiagram
class _AppLogPrinter {
+levelEmojis : Map~Level, string~
+levelNames : Map~Level, string~
+log(event : LogEvent) : string[]
}
_AppLogPrinter : levelEmojis = {<br/> Level.debug : 'ğŸ›',<br/> Level.info : 'â„¹ï¸',<br/> Level.warning : 'âš ï¸',<br/> Level.error : 'âŒ',<br/> Level.fatal : 'ğŸ’€'<br/>}
_AppLogPrinter : levelNames = {<br/> Level.debug : 'DEBUG',<br/> Level.info : 'INFO',<br/> Level.warning : 'WARN',<br/> Level.error : 'ERROR',<br/> Level.fatal : 'FATAL'<br/>}
```

**å›¾è¡¨æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L203-L217)

**æœ¬èŠ‚æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L203-L217)

## å®é™…ä½¿ç”¨ç¤ºä¾‹

### åç«¯ä½¿ç”¨ç¤ºä¾‹
åœ¨åç«¯ä»£ç ä¸­ï¼Œæ—¥å¿—è¢«å¹¿æ³›ç”¨äºè®°å½•æœåŠ¡å™¨å¯åŠ¨ã€è¯·æ±‚å¤„ç†å’Œé”™è¯¯ä¿¡æ¯ã€‚åœ¨`index.ts`ä¸­ï¼ŒæœåŠ¡å™¨å¯åŠ¨æ—¶è®°å½•äº†è¿è¡Œç«¯å£å’Œç¯å¢ƒä¿¡æ¯ï¼›åœ¨`errorHandler.ts`ä¸­ï¼Œè®°å½•äº†è¯¦ç»†çš„é”™è¯¯ä¸Šä¸‹æ–‡ã€‚

**æœ¬èŠ‚æ¥æº**  
- [index.ts](file://backend/src/index.ts#L60-L61)
- [errorHandler.ts](file://backend/src/middleware/errorHandler.ts#L20-L26)

### ç§»åŠ¨ç«¯ä½¿ç”¨ç¤ºä¾‹
ç§»åŠ¨ç«¯æä¾›äº†å¤šç§ä¸“ç”¨çš„æ—¥å¿—æ–¹æ³•ï¼Œç”¨äºè®°å½•ä¸åŒç±»å‹çš„äº‹ä»¶ã€‚åœ¨`dio_client.dart`ä¸­ï¼Œä½¿ç”¨äº†ç½‘ç»œæ—¥å¿—ã€è°ƒè¯•æ—¥å¿—å’Œé”™è¯¯æ—¥å¿—æ¥è®°å½•HTTPè¯·æ±‚çš„å®Œæ•´ç”Ÿå‘½å‘¨æœŸã€‚

```mermaid
sequenceDiagram
participant Client as "å®¢æˆ·ç«¯"
participant DioClient as "DioClient"
participant Logger as "AppLogger"
Client->>DioClient : å‘èµ·è¯·æ±‚
DioClient->>Logger : AppLogger.info('è¯·æ±‚ : URL')
alt æœ‰è¯·æ±‚æ•°æ®
DioClient->>Logger : AppLogger.debug('è¯·æ±‚æ•°æ® : ...')
end
alt æœ‰æŸ¥è¯¢å‚æ•°
DioClient->>Logger : AppLogger.debug('æŸ¥è¯¢å‚æ•° : ...')
end
DioClient->>Server : å‘é€è¯·æ±‚
alt è¯·æ±‚æˆåŠŸ
Server->>DioClient : è¿”å›å“åº”
DioClient->>Logger : AppLogger.network(method, url, statusCode)
DioClient->>Logger : AppLogger.debug('å“åº”æ•°æ® : ...')
else è¯·æ±‚å¤±è´¥
Server->>DioClient : è¿”å›é”™è¯¯
DioClient->>Logger : AppLogger.error('è¯·æ±‚å¤±è´¥ : URL', error : message)
alt æœ‰é”™è¯¯å“åº”
DioClient->>Logger : AppLogger.error('é”™è¯¯å“åº” : ...')
end
end
DioClient->>Client : è¿”å›ç»“æœ
```

**å›¾è¡¨æ¥æº**  
- [dio_client.dart](file://flutter_app/lib/core/network/dio_client.dart#L108-L154)

**æœ¬èŠ‚æ¥æº**  
- [dio_client.dart](file://flutter_app/lib/core/network/dio_client.dart#L108-L154)

### BLoCå’Œæ•°æ®æºä¸­çš„ä½¿ç”¨
åœ¨BLoCæ¨¡å¼ä¸­ï¼Œ`AppLogger`æä¾›äº†ä¸“ç”¨çš„æ–¹æ³•æ¥è®°å½•BLoCäº‹ä»¶å’ŒçŠ¶æ€å˜åŒ–ã€‚åœ¨æ•°æ®æºä¸­ï¼Œä½¿ç”¨æ—¥å¿—è®°å½•æ•°æ®åº“æ“ä½œå’Œå®‰å…¨å­˜å‚¨æ“ä½œã€‚

```mermaid
flowchart TD
A["BLoCäº‹ä»¶"] --> B["AppLogger.blocEvent()"]
B --> C["è¾“å‡º: [BLOC] BlocName -> Event: EventName"]
D["BLoCçŠ¶æ€"] --> E["AppLogger.blocState()"]
E --> F["è¾“å‡º: [BLOC] BlocName -> State: StateName"]
G["æ•°æ®æºæ“ä½œ"] --> H["AppLogger.repository()"]
H --> I["è¾“å‡º: [REPOSITORY] RepositoryName.operation -> result"]
J["æ•°æ®åº“æ“ä½œ"] --> K["AppLogger.info('åˆå§‹åŒ–æ•°æ®åº“: path')"]
K --> L["AppLogger.info('åˆ›å»ºæ•°æ®åº“è¡¨ï¼Œç‰ˆæœ¬: version')"]
M["å®‰å…¨å­˜å‚¨æ“ä½œ"] --> N["AppLogger.debug('å®‰å…¨å­˜å‚¨å†™å…¥: key')"]
N --> O["AppLogger.error('å®‰å…¨å­˜å‚¨å†™å…¥å¤±è´¥', error: e)"]
```

**å›¾è¡¨æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L137-L164)
- [database_helper.dart](file://flutter_app/lib/core/storage/database_helper.dart#L29-L48)
- [secure_storage_helper.dart](file://flutter_app/lib/core/storage/secure_storage_helper.dart#L40-L42)

**æœ¬èŠ‚æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L137-L164)
- [database_helper.dart](file://flutter_app/lib/core/storage/database_helper.dart#L29-L48)
- [secure_storage_helper.dart](file://flutter_app/lib/core/storage/secure_storage_helper.dart#L40-L42)

## æ—¥å¿—é›†æˆä¸ç›‘æ§å¹³å°

### æ§åˆ¶å°å’Œæ–‡ä»¶è¾“å‡º
åç«¯æ—¥å¿—é»˜è®¤è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œå¯ä»¥é€šè¿‡æ·»åŠ æ–‡ä»¶ä¼ è¾“å™¨ï¼ˆFile Transportï¼‰å®ç°æ–‡ä»¶è¾“å‡ºã€‚ç§»åŠ¨ç«¯åœ¨è°ƒè¯•æ¨¡å¼ä¸‹è¾“å‡ºåˆ°æ§åˆ¶å°ï¼Œåœ¨å‘å¸ƒæ¨¡å¼ä¸‹å¯ä»¥æ‰©å±•ä¸ºå†™å…¥æ–‡ä»¶ã€‚

**æœ¬èŠ‚æ¥æº**  
- [logger.ts](file://backend/src/utils/logger.ts#L11-L16)

### ç¬¬ä¸‰æ–¹ç›‘æ§å¹³å°é›†æˆ
æ—¥å¿—ç³»ç»Ÿè®¾è®¡ä¸ºå¯æ‰©å±•çš„ï¼Œå¯ä»¥é›†æˆåˆ°ELKã€Sentryç­‰ç¬¬ä¸‰æ–¹ç›‘æ§å¹³å°ã€‚ç§»åŠ¨ç«¯çš„`_AppLogOutput`ç±»ä¸­çš„TODOæ³¨é‡ŠæŒ‡æ˜äº†è¿œç¨‹æ—¥å¿—æ”¶é›†çš„å®ç°æ–¹å‘ã€‚

```mermaid
graph TB
subgraph "æ—¥å¿—æº"
Backend["åç«¯æœåŠ¡"]
Mobile["ç§»åŠ¨ç«¯åº”ç”¨"]
end
subgraph "æ—¥å¿—ä¼ è¾“"
File["æ–‡ä»¶è¾“å‡º"]
Console["æ§åˆ¶å°è¾“å‡º"]
Remote["è¿œç¨‹ä¼ è¾“"]
end
subgraph "ç›‘æ§å¹³å°"
ELK["ELK Stack"]
Sentry["Sentry"]
Custom["è‡ªå®šä¹‰ç›‘æ§å¹³å°"]
end
Backend --> File
Backend --> Console
Backend --> Remote
Mobile --> Console
Mobile --> Remote
Remote --> ELK
Remote --> Sentry
Remote --> Custom
```

**å›¾è¡¨æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L267-L269)

**æœ¬èŠ‚æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L267-L269)

## å¸¸è§é”™è¯¯ä¸æœ€ä½³å®è·µ

### å¸¸è§é”™è¯¯
1. **æ•æ„Ÿä¿¡æ¯æ³„éœ²**ï¼šé¿å…åœ¨æ—¥å¿—ä¸­è®°å½•å¯†ç ã€ä»¤ç‰Œç­‰æ•æ„Ÿä¿¡æ¯
2. **æ—¥å¿—å†—ä½™**ï¼šé¿å…åœ¨å¾ªç¯ä¸­è®°å½•å¤§é‡é‡å¤æ—¥å¿—
3. **æ—¥å¿—çº§åˆ«ä¸å½“**ï¼šé¿å…å°†è°ƒè¯•æ—¥å¿—ç”¨äºç”Ÿäº§ç¯å¢ƒ
4. **ç¼ºå°‘ä¸Šä¸‹æ–‡**ï¼šç¡®ä¿æ—¥å¿—åŒ…å«è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ä¿¡æ¯ä»¥ä¾¿æ’æŸ¥é—®é¢˜

### æœ€ä½³å®è·µ
1. **ä½¿ç”¨ç»“æ„åŒ–æ—¥å¿—**ï¼šé‡‡ç”¨JSONæ ¼å¼è¾“å‡ºï¼Œä¾¿äºæ—¥å¿—æ”¶é›†å’Œåˆ†æ
2. **åˆç†ä½¿ç”¨æ—¥å¿—çº§åˆ«**ï¼šæ ¹æ®ä¿¡æ¯çš„é‡è¦æ€§é€‰æ‹©åˆé€‚çš„æ—¥å¿—çº§åˆ«
3. **æ·»åŠ ä¸Šä¸‹æ–‡ä¿¡æ¯**ï¼šåœ¨æ—¥å¿—ä¸­åŒ…å«è¯·æ±‚IDã€ç”¨æˆ·IDç­‰ä¿¡æ¯ä»¥æ”¯æŒå…¨é“¾è·¯è¿½è¸ª
4. **ç¯å¢ƒå·®å¼‚åŒ–é…ç½®**ï¼šåœ¨å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ä¸åŒçš„æ—¥å¿—çº§åˆ«å’Œè¾“å‡ºæ–¹å¼
5. **å®šæœŸå®¡æŸ¥æ—¥å¿—**ï¼šå®šæœŸæ£€æŸ¥æ—¥å¿—å†…å®¹ï¼Œç¡®ä¿æ²¡æœ‰æ•æ„Ÿä¿¡æ¯æ³„éœ²

**æœ¬èŠ‚æ¥æº**  
- [app_logger.dart](file://flutter_app/lib/core/utils/app_logger.dart#L267-L269)
- [logger.ts](file://backend/src/utils/logger.ts#L4-L5)